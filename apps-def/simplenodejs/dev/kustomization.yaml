# apply a common label on every objects
#======================================
commonLabels:
  env: dev
# create a config map
#====================
configMapGenerator:
- name: env-cm
  literals:
  - ENV=DEV
# patch the base deployment manifest to initialize the env from the config map
#=============================================================================
patches: 
  - patch: |-
      apiVersion: apps/v1
      kind: Deployment
      metadata:
        name: simplenodeapp
      spec:
        template:
          spec:
            containers:
              - name: simplenodeapp
                env:
                  - name: ENV
                    valueFrom:
                      configMapKeyRef:
                        name: env-cm
                        key: ENV

# patch the namespace name
#=========================
patches: 
  - patch: |-
      apiVersion: v1
      kind: Namespace
      metadata:
        name: simplenodejs-dev

# patch the route name
#=====================
patches: 
  - patch: |-
      apiVersion: route.openshift.io/v1
      kind: Route
      metadata:
        name: simplenodejs-dev



resources:
- ../base
- role-binding.yaml
